<div class="apis-container">
  <h2>CATCH APIs</h2>

  <h3>Access Methods</h3>

  <p>
    This is the frontend interface of the CATCH tool. The tool itself primarily consists in the
    publicly available APIs that you can access directly through
    <a href="http://catch.astro.umd.edu/catch/docs"> this swagger interface</a> or via scripts as
    demonstrated at <a href="https://github.com/dwd-umd/catch-demo-scripts">this github repo</a>.
  </p>

  <h3>Overview of an API Call</h3>

  <p>
    Querying an astronomical object for CATCH data involves a few steps. First, you need to ensure
    that the name of the target comet/asteroid will be recognized. We provide a route to which you
    can submit arbitrary text via the 'name' query parameter, e.g. 'Gunn':
  </p>

  <p>
    <code style="margin-bottom: 10px;">https://catch.astro.umd.edu/catch/query/name?name=65P</code>
  </p>

  <p>
    This will return an array of possible matches of the following form:
  </p>

  <pre>
    {{ demoJson }}
  </pre>

  <p>
    Once you've identified the object you want to query from those shown to be available in this
    array, use the 'target' property (e.g. 65P) to start a search for data for that object using the
    'query/moving' route as follows:
  </p>

  <p>
    <code>http://catch.astro.umd.edu/catch/query/moving?target=65P</code>
  </p>

  <p>
    This will return a JSON object with a job_id parameter and information on the availability of
    the data for that target. If the target has been searched for previously then it will be cached
    and the property 'queued' will be false. If 'queued=false' then the job_id can be passed
    straight onto the 'caught' route, which retrieves the cached data for that job_id:
  </p>
  <p>
    <code> https://catch.astro.umd.edu/catch/caught/&#123;job_id&#125;</code>
  </p>

  <p>
    If data has not been cached (or if you request a recomputation of the data via the
    '/query/moving?target=65P&cached=false' query params) then a lengthy query will have been
    launched and the property 'queued=true' will have been returned. In this case, you'll need to
    wait until the data is ready before retrieving it via the '/caught/&#123;job_id&#125;' route.
  </p>

  <p>
    The time required to prepare the data varies from object to object and typically takes between
    5-60 seconds. To know exactly when the route is ready, you can subscribe to
    <i>Server Sent Events</i> generated by the route
  </p>

  <p>
    <code>
      https://catch.astro.umd.edu/catch/stream
    </code>
  </p>

  <p>
    which will emit messages about the state of the job. If/when the SSE emits a message with
    '"status": "success"', then the data is ready and can be retrieved from the 'caught' route
    described above.
  </p>
</div>
